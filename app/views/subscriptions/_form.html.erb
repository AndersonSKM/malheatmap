<%= turbo_frame_tag dom_class(subscription, "form"), target: "_top" do %>
  <%= form_with model: subscription, url: subscriptions_path, method: "post" do |form| %>
    <div class="field has-text-centered">
      <%= form.label :username do %>
        <%= t(".form_label_html") %>
      <% end %>
    </div>

    <div class="field notifications-container">
      <%= render Notification::Component.new(message: subscription.errors.full_messages.first) %>
    </div>

    <div class="field has-addons">
      <div class="control is-expanded">
        <%= form.text_field :username, placeholder: true, class: "input" %>
      </div>

      <div class="control">
        <%= form.button class: "button is-primary",
                      onclick: "window._paq.push(['trackEvent', 'Subscription', 'Click'])" do  %>
          <span class="show-when-enabled">Subscribe</span>
          <span class="show-when-disabled">Submitting...</span>
        <% end %>
      </div>
    </div>

    <div class="field pt-4 has-text-centered">
      <p><i><%= t(".subscribed_users", count: User.count) %></i></p>
    </div>
  <% end %>
<% end %>
